/*! For license information please see index.57b3cb39.js.LICENSE.txt */
"use strict";(self.webpackChunktucao=self.webpackChunktucao||[]).push([[7885],{38318:function(e,n,t){t.d(n,{p:function(){return s}});var i=t(67294),r=t(94184),a=t.n(r),o=t(45697),l=t.n(o),c=t(29371),s=function(e){return i.createElement("div",{className:a()("btn btn-comment",{disabled:e.is_disabled}),onClick:function(){return e.is_disabled?null:e.onClick()}},i.createElement(c.i7,null),e.is_disabled?i.createElement("span",{className:"btn-text"},"已关闭评论"):i.createElement("span",{className:"btn-text"},e.is_show?"取消评论":e.replyNum))};s.propTypes={is_disabled:l().bool,is_show:l().bool,onClick:l().func},s.defaultProps={replyNum:"评论"}},70247:function(e,n,t){t.d(n,{J:function(){return a}});var i=t(67294),r=(t(94184),t(29371)),a=function(e){return i.createElement("a",{className:"btn btn-details",target:"_blank",href:e.href},i.createElement(r.h3,null),i.createElement("b",{className:"btn-text"},"详情"))};a.defaultProps={href:"javascript:;"}},7410:function(e,n,t){t.d(n,{A:function(){return l}});var i=t(67294),r=t(94184),a=t.n(r),o=t(29371),l=function(e){return i.createElement("div",{className:a()("btn btn-reward"),onClick:e.onClick},i.createElement(o.yX,null),i.createElement("b",{className:"btn-text"},"赞赏"),i.createElement("div",{className:"wx_reward"},"微信发帖才能被赞赏"))};l.defaultProps={onClick:function(){return console.log("onClick 未绑定")}}},7232:function(e,n,t){t.d(n,{n0:function(){return i.n},AT:function(){return r.A},ii:function(){return a.i},AM:function(){return o.A},RR:function(){return l.R},pJ:function(){return c.p},JY:function(){return s.J}});var i=t(95687),r=t(23897),a=t(14765),o=t(7410),l=(t(39917),t(43667)),c=t(38318),s=t(70247);t(17715)},57720:function(e,n,t){t.d(n,{l:function(){return u}});var i=t(67294),r=t(94184),a=t.n(r),o=t(45697),l=t.n(o),c=t(38861),s=(0,t(99087).z)(c.w),u=function(e){var n=e.imgList,t=e.handleImagesClick;return i.createElement("div",{className:"image_desktop"},n.map((function(e,r){return i.createElement("span",{key:""+e.original_url+r,className:a()({desc_pic:n.length>1,desc_pic_one:1===n.length}),onClick:function(){return t(r)}},i.createElement(s,{className:"pic_img",src:m(e.original_url)}))})))},m=function(e){return e.replace(/^https?:/i,"")};u.defaultProps={imgList:[],original_url:"",handleImagesClick:function(e){console.log("函数未绑定")}},u.propTypes={imgList:l().array}},3304:function(e,n,t){t.d(n,{T:function(){return o}});var i=t(67294),r=t(45697),a=t.n(r),o=function(e){return i.createElement("div",{className:"confirm confirm-delete"},i.createElement("p",{className:"confirm-text"},"确认删除？"),i.createElement("div",{className:"confirm-btn"},i.createElement("button",{className:"btn btn-primary",onClick:e.onConfirm},"删除"),i.createElement("button",{className:"btn",onClick:e.onCancel},"取消")))};o.propTypes={onCancel:a().func,onConfirm:a().func}},3260:function(e,n,t){t.d(n,{v2:function(){return i.v},TX:function(){return r.T}}),t(64363),t(49723);var i=t(25539),r=t(3304);t(5396),t(15009)},22135:function(e,n,t){t.d(n,{T:function(){return p}});var i=t(51721),r=t(4942),a=t(67294),o=t(94184),l=t.n(o),c=t(77314),s=t(45697),u=t.n(s),m=t(63075),d=t(8001),p=function(e){function n(n){var t;return(t=e.call(this,n)||this).emojiArr=t.getEmojiArr(),t.state={index:0},t}(0,i.Z)(n,e);var t=n.prototype;return t.getEmojiArr=function(){var e=Array.from({length:n.emojiCount},(function(e,n){return n})),t=Math.ceil(n.emojiCount/26),i=new Array(t);return e.forEach((function(e){var n=Math.floor(e/26);i[n]||(i[n]=[]),i[n].push(e+1)})),i.map((function(e){return e.push("del")})),i},t.updateIndex=function(e){this.setState({index:e})},t.selectEmoji=function(e){var n=this.props,t="["+d.Z[e]+"]";n.onSelectEmoji(t)},t.delEmoji=function(){this.props.onDelEmoji()},t.renderSlides=function(){var e=this,n=this.state;return a.createElement(c.Z,{index:n.index,ignoreNativeScroll:!0,resistance:!0,onChangeIndex:function(n){return e.updateIndex(n)}},this.emojiArr.map((function(n,t){return a.createElement(m.Z.ul,{key:t,className:"expression-container"},n.map((function(n){return"del"===n?a.createElement(m.Z.li,{key:"del-expression",className:"expression-item",onClick:function(){return e.delEmoji()}},a.createElement(m.Z.i,{className:"del-expression"})):a.createElement(m.Z.li,{className:"expression-item",key:n,onClick:function(){return e.selectEmoji(n-1)}},a.createElement(m.Z.i,{className:"Expression_"+n}))})))})))},t.renderPagination=function(){var e=this.state;return a.createElement(m.Z.div,{className:"emoji-slide-pagination"},this.emojiArr.map((function(n,t){return a.createElement(m.Z.span,{className:l()("emoji-slide-dot",{active:e.index===t}),key:t})})))},t.render=function(){this.state;var e=this.props;return a.createElement(m.Z.div,{className:l()("emoji-keyboard",{fold:e.isFold})},a.createElement(m.Z.div,{className:"emoji-container"},this.renderSlides(),this.renderPagination()))},n}(a.Component);(0,r.Z)(p,"emojiCount",100),p.propTypes={onDelEmoji:u().func,onSelectEmoji:u().func,isFold:u().bool},p.defaultProps={onDelEmoji:function(){return console.log("未绑定 onDelEmoji")},onSelectEmoji:function(){return console.log("未绑定 onSelectEmoji")},isFold:!1}},5599:function(e,n,t){t.d(n,{$:function(){return s}});var i=t(51721),r=t(23282),a=t(67294),o=t(45697),l=t.n(o),c=t(8001),s=function(e){function n(){return e.apply(this,arguments)||this}(0,i.Z)(n,e);var t=n.prototype;return t.selectEmoji=function(e){this.props.onSelectEmoji("["+c.Z[e]+"]","Expression_"+(e+1))},t.render=function(){var e=this;return a.createElement("div",{className:"emoji-popup"},a.createElement("div",{className:"scroll-container"},a.createElement("table",null,a.createElement("tbody",null,(0,r.Z)(c.Z,9).map((function(n,t){return a.createElement("tr",{key:t,className:"row"},n.map((function(n,i){var r=i+9*t;return a.createElement("td",{key:r+1,className:"col",onClick:function(n){return e.selectEmoji(r)}},a.createElement("i",{className:"Expression_"+(r+1)}))})))}))))))},n}(a.Component);s.propTypes={onSelectEmoji:l().func},s.defaultProps={onSelectEmoji:function(){return console.log("onSelectEmoji 未绑定")}}},96074:function(e,n,t){t.d(n,{u:function(){return k}});var i=t(67294),r=t(45697),a=t.n(r),o=t(94184),l=t.n(o),c=t(18118),s=t(5732),u=t(7232),m=t(57720),d=t(3260),p=t(64724),f=t(13501),_=t(56623),k=function(e){var n=(0,i.useState)(!1),t=n[0],r=n[1],a=(0,i.useState)(null),o=a[0],k=a[1],E=(0,i.useState)(!1),h=E[0],v=E[1],g=(0,i.useRef)(null),C=Boolean(e.user_id===e.userData.user_id);return i.createElement("div",{className:"comment_item_pc"},i.createElement("a",{className:"user_avatar",target:"_blank",href:(0,p.Ik)(e.user_id),rel:"noreferrer"},i.createElement(s.Avatar,{src:e.avatar_url})),i.createElement("div",{className:"item_content"},i.createElement("div",{className:"user_info"},i.createElement("h5",{className:"user_name"},i.createElement("a",{className:l()("link",{admin:e.is_admin}),target:"_blank",href:(0,p.Ik)(e.user_id),rel:"noreferrer"},e.nick_name),e.parent&&e.parent.nick_name&&i.createElement(i.Fragment,null,i.createElement("i",{className:"jt"}),i.createElement("a",{className:l()("link",{admin:e.parent.is_admin}),href:" "},e.parent.nick_name))),i.createElement("div",{className:"public_group_name"},e.group_name),i.createElement("div",{className:"public_time"},(0,f.pp)(e.created_at_timestamp))),i.createElement(_.g,{desc:e.f_reply_text}),Boolean(e.images.length)&&i.createElement(m.l,{imgList:e.images,handleImagesClick:function(e){return k(e)}}),i.createElement(u.RR,null,i.createElement(u.AT,{onClick:function(){e.onCheckLogin()&&v(!0)},ref:g},h&&i.createElement(i.Fragment,null,i.createElement("div",{style:{display:t?"block":"none"}},i.createElement(d.TX,{onConfirm:function(){var n=e.f_reply_id||e.id;r(!1),v(!1),e.onClickDelete(n)},onCancel:function(){r(!1),g.current.close()}})),i.createElement("div",{style:{display:t?"none":"block"}},i.createElement(d.v2,{is_reply:!0,is_spam:e.is_spam,is_admin:e.userData.is_admin,is_owner:C,is_admin_post:e.is_admin,onClick:function(n){var t=n.opt,i=n.val,a=e.f_reply_id||e.id;"delete"!==t?(v(!1),e.onClickMenu&&e.onClickMenu({opt:t,val:i},a)):r(!0)},hideList:e.hideActionList})))),i.createElement(u.n0,{like_count:e.likedInfo.like_count,isLiked:e.likedInfo.like_flag,onClick:function(){var n=e.likedInfo,t=n.like_count,i=n.like_flag,r={like_count:i?t-1:t+1,like_flag:!i};e.onRepliesLiked(r)}}),i.createElement(u.ii,{is_disabled:e.is_locked,onClick:e.onReply}))),null!==o&&i.createElement(c.ES,{imageList:e.images.map((function(e){return e.original_url})),previewList:e.images.map((function(e){return e.thumb_url})),showPreview:!0,showIndex:o,onClose:function(){return k(null)}}))};k.propTypes={f_reply_id:a().string,id:a().string,user_id:a().number,avatar_url:a().string,nick_name:a().string,group_name:a().string,created_at_timestamp:a().number,f_reply_text:a().string,is_locked:a().bool,is_spam:a().bool,is_admin:a().bool,images:a().array,hideActionList:a().array,parent:a().object,userData:a().object,likedInfo:a().object,onReply:a().func,onRepliesLiked:a().func,onClickMenu:a().func,onClickDelete:a().func,onCheckLogin:a().func},k.defaultProps={images:[],likedInfo:{like_count:0,like_flag:!1},f_reply_text:"",user_id:0,userData:{},hideActionList:[],onClickDelete:function(){return console.log("onClickDelete 没有")},onClickMenu:function(){return console.log("onClickMenu 没有")},onRepliesLiked:function(){return console.log("onRepliesLiked 没有")},onCheckLogin:function(){return!1}}},56623:function(e,n,t){t.d(n,{g:function(){return a}});var i=t(67294),r=t(88927),a=function(e){return i.createElement("div",{className:"desc_para",dangerouslySetInnerHTML:(0,r.ah)(e.desc)})}},52737:function(e,n,t){t.d(n,{g:function(){return m}});var i=t(97326),r=t(51721),a=t(67294),o=t(94184),l=t.n(o),c=t(63075),s=t(7765),u=t(88927),m=(t(58031),function(e){function n(n){var t;return(t=e.call(this,n)||this).myref=a.createRef(),t.state={limit:!0,btnState:!1},t.onToggle=t.onToggle.bind((0,i.Z)(t)),t}(0,r.Z)(n,e);var t=n.prototype;return t.componentDidMount=function(){var e=this;setTimeout((function(){e.lineLimit(e.myref.current)}),0)},t.lineLimit=function(e){if(e){var n=e.clientHeight;return e.scrollHeight>n?this.setState({limit:!0,btnState:!0}):this.setState({limit:!1,btnState:!1})}},t.onToggle=function(e){e.preventDefault(),e.stopPropagation(),this.setState((function(e){return{limit:!e.limit}}))},t.render=function(){var e=this.props,n=this.state;return a.createElement(c.Z.div,{className:"desc","aria-hidden":!0},a.createElement(s.Z,{className:l()("desc_p",{line_omit:n.limit}),ref:this.myref,content:(0,u.ah)(e.desc).__html}),n.btnState&&a.createElement(c.Z.span,{className:"desc_btn","aria-hidden":!0,onClick:this.onToggle},n.limit?"全文":"收起"))},n}(a.Component));m.defaultProps={desc:""}},61769:function(e,n,t){t.d(n,{Y:function(){return g}});var i=t(87462),r=t(37514),a=t(67294),o=t(94184),l=t.n(o),c=t(78734),s=t(29371),u=t(63075),m=t(66040),d=t(5732),p=t(7232),f=t(34410),_=t(64724),k=t(52737),E=t(39648),h=t(34845),v=t(80934),g=function(e){var n=[];(0,r.Z)(e.replies)&&(n=Object.keys(e.replies).map((function(n){return e.replies[n]})));var t=function(n){n.preventDefault(),n.stopPropagation(),c.Z.push((0,_.Ik)(e.user_id))};return a.createElement(u.Z.div,{className:"post_item_mobile post_list_item"},a.createElement(u.Z.span,{tag:"span",onClick:t},a.createElement(d.Avatar,{src:e.avatar_url,className:"item_user"})),a.createElement(u.Z.div,{className:"item_content"},a.createElement(u.Z.div,{className:"title"},a.createElement(u.Z.h3,(0,i.Z)({className:l()("title_name",{"title_name--admin":e.is_admin}),onClick:t},(0,f.I)("link"),{"aria-label":(e.is_admin?"管理员":"")+e.nick_name+" 前往"+e.nick_name+" 个人中心"}),e.nick_name),a.createElement(u.Z.div,{className:"title_label","aria-hidden":!0},e.is_top&&a.createElement(u.Z.span,{className:"label_font"},"置顶"),e.is_hidden&&a.createElement(u.Z.span,{className:"label_font"},"隐藏"),e.is_spam&&a.createElement(u.Z.span,{className:"label_font"},"黑名单"),e.is_notice&&a.createElement(u.Z.span,{className:"label_font"},"公告"),e.is_good&&a.createElement(u.Z.span,{className:"label_font label_good"},a.createElement(u.Z.img,{className:"label_good__icon",src:v.Z,alt:"好问题"})))),a.createElement(u.Z.a,{href:(0,_.kD)(e.id),"aria-label":(e.is_top?"置顶":"")+" "+(e.is_hidden?"隐藏":"")+" "+(e.is_spam?"黑名单":"")+" "+(e.is_notice?"公告":"")+" "+(e.is_good?"好问题":"")+" "+e.content+" "+e.time},a.createElement(k.g,{desc:e.content})),Boolean(e.images.length)&&a.createElement(u.Z.div,{className:"photowall"},a.createElement(m.Yl,{imgList:e.images})),a.createElement(u.Z.div,{className:"comment_fun"},a.createElement(u.Z.div,{className:"publish","aria-hidden":!0},e.time),a.createElement(u.Z.div,{className:"operate_btn"},a.createElement(p.RR,{isMobile:!0},a.createElement(p.n0,{like_count:e.like_count,isLiked:e.is_liked,default_count:0,onClick:function(n){n.preventDefault(),n.stopPropagation(),e.onLiked()}}),a.createElement(u.Z.button,(0,i.Z)({className:"btn btn-item",onClick:function(n){n.preventDefault(),n.stopPropagation(),e.onClickMore()}},(0,f.I)("button"),{"aria-label":"更多操作",needAuth:!0}),a.createElement(s.E$,null))))),Boolean(n.length)&&a.createElement(u.Z.div,{className:"commodule"},a.createElement(u.Z.div,{className:"comment_list"},n.map((function(n,t){return a.createElement(E.H,(0,i.Z)({key:t},n,{parent:e.replies[n.parent_reply_id]}))}))),e.reply_num>3&&a.createElement(u.Z.a,{className:"comment_total",href:(0,_.kD)(e.id)},"查看全部评论 >"))))};g.defaultProps={avatar_url:"",nick_name:"-",content:"",is_top:!1,is_good:!1,is_liked:!1,is_notice:!1,images:[],onLiked:function(){return console.log("未绑定 onLiked")},onClickMore:function(){return console.log("未绑定 onClickMore")}},g.propTypes=h.g},2749:function(e,n,t){t.d(n,{v:function(){return m}});var i=t(97326),r=t(51721),a=t(67294),o=t(7232),l=t(3260),c=t(64724),s=t(23587),u=t(9170),m=function(e){function n(n){var t;return(t=e.call(this,n)||this).postUrl=location.origin+(0,c.kD)(t.props.id),t.state={confirm_delete:!1},t.confirmDelete=t.confirmDelete.bind((0,i.Z)(t)),t.cancelDelete=t.cancelDelete.bind((0,i.Z)(t)),t.dropdownRef=a.createRef(),t}(0,r.Z)(n,e);var t=n.prototype;return t.confirmDelete=function(){this.props.onClickDelete(),this.setState({confirm_delete:!0})},t.cancelDelete=function(){this.setState({confirm_delete:!1}),this.dropdownRef.current.close()},t.onClickMenu=function(e){var n=e.opt,t=e.val;"delete"!==n?(this.setState({showMenu:!1}),this.props.onClickMenu&&this.props.onClickMenu({opt:n,val:t})):this.setState({confirm_delete:!0})},t.isOwner=function(){var e=this.props;return!!e.user&&Boolean(Number(e.user.user_id)===Number(e.user_id))},t.onBtnMoreClick=function(){this.props.onCheckLogin()&&this.setState({showMenu:!0})},t.render=function(){var e=this,n=this.props,t=this.state,i=this.isOwner(),r="on"===n.productData.tip_status&&n.rewardInfo[n.id]&&n.rewardInfo[n.id].can||!1,c=n.reply_count||n.reply_num;return c=c>0?c:"评论",a.createElement("div",{className:"post_operations"},a.createElement(o.RR,null,a.createElement("div",{className:"hover_show"},a.createElement(o.AT,{onClick:function(){return e.onBtnMoreClick()},ref:this.dropdownRef},a.createElement("div",{style:{display:t.confirm_delete?"block":"none"}},a.createElement(l.TX,{onConfirm:this.confirmDelete,onCancel:this.cancelDelete})),a.createElement("div",{style:{display:t.confirm_delete?"none":"block"}},t.showMenu&&a.createElement(l.v2,{is_reply:n.is_reply,is_top:n.is_top,is_locked:n.is_locked,is_hidden:n.is_hidden,is_spam:n.is_spam,is_admin:n.user.is_admin,is_good:n.is_good,is_owner:i,is_admin_post:n.is_admin,onClick:this.onClickMenu.bind(this),handleCopyLink:function(){return(0,s.Z)(e.postUrl,"复制链接成功。")}}))),a.createElement("div",{style:{display:r?"inline-block":"none"}},a.createElement(o.AM,{canReward:r,onClick:n.onRewardCLick})),a.createElement(o.JY,{href:this.postUrl})),n.tapdEntry&&a.createElement(u.R,{onClick:n.onClickTapd}),a.createElement(o.n0,{like_count:n.like_count,isLiked:n.is_liked,onClick:n.onClickLike}),a.createElement(o.pJ,{onClick:n.onCommentBtn,is_disabled:n.is_locked,replyNum:c})))},n}(a.Component);m.defaultProps={confirm_delete:!1,is_top:!1,is_locked:!1,is_hidden:!1,is_spam:!1,is_admin:!1,isOwner:!1,is_reply:!1,tapdEntry:!1,onClickMenu:function(){return console.log("onClickMenu 函数未绑定")},onClickDelete:function(){return console.log("onClickDelete 没绑定")},onCheckLogin:function(){return!1},onClickTapd:function(){return console.log("onClickTapd 未绑定")}}},13030:function(e,n,t){t.d(n,{o4:function(){return i.o},ou:function(){return r.o},wS:function(){return r.w},Nt:function(){return a.N}});var i=t(50283),r=t(11848),a=t(24493)},5831:function(e,n,t){t.d(n,{T:function(){return a}});var i=t(67294),r=t(5732),a=function(e){return i.createElement("div",{className:"user_apprec"},e.tip_list.map((function(e,n){return i.createElement(r.Avatar,{className:"user_img",src:e.avatar,key:n})})),i.createElement("span",{className:"apprec_times"},e.tip_list.length,"人赞赏 共",(e.tip_amount_total/100).toFixed(2),"元"))};a.defaultProps={tip_list:[],tip_amount_total:0}}}]);
//# sourceMappingURL=index.57b3cb39.js.map