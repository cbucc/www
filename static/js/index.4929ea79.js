/*! For license information please see index.4929ea79.js.LICENSE.txt */
"use strict";(self.webpackChunktucao=self.webpackChunktucao||[]).push([[7197],{29500:function(e,t,n){n.d(t,{d:function(){return b}});var o=n(87462),i=n(51721),l=n(67294),s=n(73935),a=n(63075),r=n(94184),c=n.n(r),m=n(45697),_=n.n(m),u=n(34410),p=n(83078),d=n(29371),f=n(66773),b=function(e){function t(t){var n;return(n=e.call(this,t)||this).cancelBtn=(0,l.createRef)(),n.prevFocusElm=null,n.state={confirm_delete:!1,confirm_report:!1,confirm_spam:!1},n}(0,i.Z)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){e.showmore&&!this.props.showmore&&this.resetState(),this.props.showmore&&this.cancelBtn.current&&"function"==typeof this.cancelBtn.current.focus&&(this.prevFocusElm=document.activeElement,this.cancelBtn.current.focus()),!this.props.showmore&&e.showmore&&this.prevFocusElm&&"function"==typeof this.prevFocusElm.focus&&this.prevFocusElm.focus()},n.resetState=function(){this.setState({confirm_delete:!1,confirm_report:!1,confirm_spam:!1})},n.onClickMenu=function(e){var t=e.opt,n=e.val,o=this.props;this.state,"delete"!==t?"report"!==t?"spam"!==t||"on"!==n?o.onChange({opt:t,val:n}):this.setState({confirm_spam:!0}):this.setState({confirm_report:!0}):this.setState({confirm_delete:!0})},n.renderView=function(){var e=this,t=this.state,n=this.props,i=t.confirm_delete||t.confirm_report||t.confirm_spam;return n.showmore?l.createElement(l.Fragment,null,n.showmore&&l.createElement(p.z,{onClick:function(t){e.resetState(),n.onCancel()}}),l.createElement(a.Z.div,(0,o.Z)({},(0,u.I)("dialog"),{"aria-modal":!0,"aria-labelledby":"opera_desc",className:c()("operations_area",{active:n.showmore})}),!i&&l.createElement(a.Z.div,{className:"operations_area_option"},l.createElement(a.Z.h6,{className:"opera_desc",id:"opera_desc",ref:this.cancelBtn,tabindex:"-1"},"对“"+n.nick_name+"”的帖子进行操作"),l.createElement(h,{is_admin:n.is_admin,is_admin_post:n.is_admin_post,is_owner:n.is_owner,is_top:n.is_top,is_spam:n.is_spam,is_hidden:n.is_hidden,is_locked:n.is_locked,is_reply:n.is_reply,is_good:n.is_good,onClick:function(t){return e.onClickMenu(t)}})),t.confirm_delete&&l.createElement(a.Z.div,{className:"operations_area_confirm"},l.createElement(a.Z.div,{className:"delete_desc"},"删除后将不可恢复"),l.createElement(a.Z.div,{className:"delete_btn",onClick:function(e){return n.onDelete()},tabindex:0},"确认删除")),t.confirm_spam&&l.createElement(a.Z.div,{className:"operations_area_confirm"},l.createElement(a.Z.div,{className:"delete_desc"},"加入黑名单，该用户所有帖子不再显示"),l.createElement(a.Z.div,{className:"delete_btn",onClick:function(e){return n.onChange({opt:"block",val:"on"})}},"确认加入黑名单")),t.confirm_report&&l.createElement(f.a,{onReport:function(e){return n.onReport(e)}}),l.createElement(a.Z.div,(0,o.Z)({className:"operations_area_cancel else_color"},(0,u.I)("button"),{tabindex:0,onClick:function(t){e.resetState(),n.onCancel()}}),"取消"))):null},n.render=function(){return(0,s.createPortal)(this.renderView(),document.body)},t}(l.Component);b.propTypes={onChange:_().func,onDelete:_().func,onReport:_().func,onCancel:_().func,is_admin:_().bool,is_admin_post:_().bool,is_owner:_().bool,nick_name:_().string,is_top:_().bool,is_spam:_().bool,is_hidden:_().bool,is_locked:_().bool,is_reply:_().bool,is_good:_().bool,showmore:_().bool},b.defaultProps={onChange:function(){return console.log("onChange 未绑定")},onDelete:function(){return console.log("onDelete 未绑定")},onCancel:function(){return console.log("onCancel 未绑定")},onReport:function(){return console.log("onReport 未绑定")},is_admin:!1,is_admin_post:!1,is_owner:!1,is_top:!1,is_spam:!1,is_hidden:!1,is_locked:!1,is_reply:!1,is_good:!1};var h=function(e){return e.is_admin?l.createElement(a.Z.ul,{className:"opera_list"},!e.is_reply&&l.createElement(a.Z.li,(0,o.Z)({className:"opera_list_item"},(0,u.I)("button"),{tabindex:0,onClick:function(t){return e.onClick({opt:"top",val:e.is_top?"off":"on"})}}),l.createElement(a.Z.div,{className:"btn"},l.createElement(d.RB,null)),e.is_top?"取消置顶":"置顶"),!e.is_reply&&l.createElement(a.Z.li,(0,o.Z)({className:"opera_list_item"},(0,u.I)("button"),{tabindex:0,onClick:function(t){return e.onClick({opt:"hide",val:e.is_hidden?"off":"on"})}}),l.createElement(a.Z.div,{className:"btn"},e.is_hidden?l.createElement(d.D6,null):l.createElement(d.VG,null)),e.is_hidden?"取消隐藏":"隐藏"),!e.is_admin_post&&l.createElement(a.Z.li,(0,o.Z)({className:"opera_list_item"},(0,u.I)("button"),{tabindex:0,onClick:function(t){return e.onClick({opt:"block",val:e.is_spam?"off":"on"})}}),l.createElement(a.Z.div,{className:"btn"},l.createElement(d.sP,null)),e.is_spam?"取消黑名单":"加入黑名单"),!e.is_reply&&l.createElement(a.Z.li,(0,o.Z)({className:"opera_list_item"},(0,u.I)("button"),{tabindex:0,onClick:function(t){return e.onClick({opt:"lock",val:e.is_locked?"off":"on"})}}),l.createElement(a.Z.div,{className:"btn"},e.is_locked?l.createElement(d.Zr,null):l.createElement(d.pC,null)),e.is_locked?"允许回复":"禁止回复"),!e.is_reply&&l.createElement(a.Z.li,(0,o.Z)({className:"opera_list_item"},(0,u.I)("button"),{tabindex:0,onClick:function(t){return e.onClick({opt:"good",val:e.is_good?"off":"on"})}}),l.createElement(a.Z.div,{className:"btn"},l.createElement(d.id,null)),e.is_good?"取消好问题":"标为好问题"),l.createElement(a.Z.li,(0,o.Z)({className:"opera_list_item"},(0,u.I)("button"),{tabindex:0,onClick:function(t){return e.onClick({opt:"delete"})}}),l.createElement(a.Z.div,{className:"btn"},l.createElement(d.Zf,null)),"删除")):e.is_owner?l.createElement(a.Z.ul,{className:"opera_list"},l.createElement(a.Z.li,(0,o.Z)({className:"opera_list_item"},(0,u.I)("button"),{tabindex:0,onClick:function(t){return e.onClick({opt:"delete"})}}),l.createElement(a.Z.div,{className:"btn"},l.createElement(d.Zf,null)),"删除")):l.createElement(a.Z.ul,{className:"opera_list"},l.createElement(a.Z.li,(0,o.Z)({className:"opera_list_item"},(0,u.I)("button"),{tabindex:0,onClick:function(t){return e.onClick({opt:"report"})}}),l.createElement(a.Z.div,{className:"btn"},l.createElement(d.aV,null)),"举报"))};h.propTypes={is_top:_().bool,is_spam:_().bool,is_hidden:_().bool,is_locked:_().bool,is_admin:_().bool,is_admin_post:_().bool,is_owner:_().bool,is_reply:_().bool,is_good:_().bool,onClick:_().func},h.defaultProps={is_top:!1,is_spam:!1,is_hidden:!1,is_locked:!1,is_admin:!1,is_admin_post:!1,is_owner:!1,is_reply:!1,is_good:!1,onClick:function(){return console.log("Menu onClick 未绑定")}}},82063:function(e,t,n){n.d(t,{h:function(){return o}});var o=[{key:"ad",value:"垃圾广告"},{key:"sex",value:"色情"},{key:"abuse",value:"辱骂"},{key:"illegal",value:"违法信息"},{key:"political",value:"政治敏感"},{key:"nonage",value:"未成年人不良信息"},{key:"other",value:"其他"}]}}]);
//# sourceMappingURL=index.4929ea79.js.map