/*! For license information please see index.9aad3417.js.LICENSE.txt */
"use strict";(self.webpackChunktucao=self.webpackChunktucao||[]).push([[9078],{9170:function(e,t,n){n.d(t,{R:function(){return a}});var r=n(67294),o=(n(23587),n(29371)),a=function(e){return r.createElement("div",{className:"btn btn-tapd",onClick:e.onClick,role:"button",tabIndex:"-1"},r.createElement(o.q7,{style:{height:14,width:14}}),r.createElement("b",{className:"btn-text"},"TAPD"))};a.defaultProps={onClick:function(){return console.log("onClick 未绑定")}}},87488:function(e,t,n){n.d(t,{pv:function(){return r},$X:function(){return o},PQ:function(){return a},_p:function(){return i}}),n(45697);var r=36456,o=36028,a=36086,i=333559},48915:function(e,t,n){n.d(t,{D:function(){return r}});var r=Object.freeze({PUBLIC:1,PRIVATE:2});Object.freeze({PRODUCT:1,BOTH:2})},58031:function(e,t,n){n.d(t,{T:function(){return r.T},$:function(){return o.$}});var r=n(22135),o=n(5599);n.e(2069).then(n.bind(n,99196))},73419:function(e,t,n){var r=n(97326),o=n(51721),a=n(66749),i=n(67294),s=n(45697),c=n.n(s),u=(n(94184),n(70272)),l=(n(19973),n(9131)),p=n(88927),m=n(10457),d=n(61962),f=n(29371),h=n(29103),E=(n(58031),n(13501)),g="i-want-form",v=function(e){function t(t){var n;return(n=e.call(this,t)||this).inputFileId=(0,a.Z)("input-file-for-images"),n.titleEditorRef=(0,i.createRef)(),n.painEditorRef=(0,i.createRef)(),n.solutionEditorRef=(0,i.createRef)(),n.onSubmit=n.onSubmit.bind((0,r.Z)(n)),n.verifyInput=n.verifyInput.bind((0,r.Z)(n)),n.productId=(0,E.Wv)(),n.state={images:{},submitting:!1},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.titleEditorRef.current&&this.titleEditorRef.current.focus()},n.verifyInput=function(e){var t=e.title,n=e.content,r=e.solution,o=this.props.onError;return t.length<5||t.length>30?(o(new Error("“标题”需要在5-30字内")),!1):n.length<5||n.length>1e3?(o(new Error("“目前不爽”需要在5-1000字内")),!1):!(r.length<5||r.length>1e3)||(o(new Error("“你的解决方案”需要在5-1000字内")),!1)},n.onSubmit=function(){var e=this,t=this.state,n=t.images;if(!t.submitting){var r=this.titleEditorRef.current.getValue(),o=this.painEditorRef.current.getValue(),a=this.solutionEditorRef.current.getValue(),i=Object.keys(n).map((function(e){return n[e].respInfo}));this.verifyInput({title:r,content:o,solution:a})&&(this.setState({submitting:!0}),(0,l.postApiIwantCreate)({productId:this.productId,title:r,content:o,solution:a,images:i}).then((function(t){if(e.setState({submitting:!1}),0!==t.status||!t.data)return Promise.reject(t.message);u.message.success("发帖成功"),e.props.onClose&&e.props.onClose()})))}},n.onSelectEmoji=function(e,t){console.log(e,t)},n.getSubmitStatus=function(){return this.state.submitting},n.getPreviewImages=function(){var e=this.state;return Object.keys(e.images).map((function(t){var n=e.images[t];return{src:n.dataURL,id:t,progress:n.progress}}))},n.onSelectImage=function(e){var t=this,n=this.state,r=this.props,o=Array.from(e.target.files),a=Object.keys(n.images).length;return o.length+a>r.limitImage?r.onError(m.be):o.some(m.kP)?r.onError(m.vf):o.some(m.$1)?r.onError(m.f6):(o.forEach((function(e){t.uploadImagePipe(e)})),void(0,m.eC)(e.target).reset())},n.uploadImagePipe=function(e){var t=this;if(e){if(Object.keys(this.state.images).length>=this.props.limitImage)return this.props.onError(m.be);var n=e.name,r=e.lastModified,o=n+"||"+e.size+"||"+r;if(this.state.images[o])return this.props.onError(m.GM);Promise.resolve().then((function(){return t.readImage(e,o)})).then((function(){return t.uploadImage(e,o)}))}},n.uploadImage=function(e,t){var n=this,r=(this.state,this.props),o=new FormData;o.append("type","i_want_it"),o.append("upload",e),r.onUploadImage(o,(function(e){var r=e.total,o=e.loaded;n.setState((function(e){var n=e.images;if(void 0!==n[t]){var a=(o/r*100).toFixed(2);return Number(a)>90&&(a="90"),n[t]=Object.assign(n[t],{progress:a}),{images:Object.assign({},n)}}}))})).then((function(e){n.setState((function(n){var r=n.images;if(void 0!==r[t])return r[t]=Object.assign(r[t],{respInfo:e.data,progress:"100"}),{images:Object.assign({},r)}}))})).catch((function(e){return n.onDelImage(t),r.onError(e)}))},n.readImage=function(e,t){var n=this,r=(this.state,this.props,new FileReader);return new Promise((function(o,a){r.addEventListener("load",(function(e){var r=e.target.result;n.setState((function(e){var n=e.images;return n[t]={id:t,progress:0,dataURL:r},{images:Object.assign({},n)}})),o()}),!1),r.addEventListener("error",a,!1),r.readAsDataURL(e)}))},n.onDelImage=function(e){this.props,this.setState((function(t){var n=t.images;return delete n[e],{images:Object.assign({},n)}}))},n.render=function(){var e=this,t=this.getSubmitStatus();return i.createElement("div",{className:g},i.createElement("div",{className:g+"__notice"},"假设你是我们的产品经理，您最想要的一个功能场景是："),i.createElement("div",{className:g+"__item"},i.createElement("div",{className:g+"__title"},"标题"),i.createElement("div",{className:g+"__outline"},i.createElement(h.M,{ref:this.titleEditorRef,className:g+"__editor",placeholder:"简要概括你的想法5 - 30字",onPasteTransform:function(t,n){var r=(0,p.jQ)(t);r=(0,p.FL)(r),(0,h.U)(r),e.uploadImagePipe(n)},onChange:function(){return e.forceUpdate()}}))),i.createElement("div",{className:g+"__item"},i.createElement("div",{className:g+"__title"},"目前不爽"),i.createElement("div",{className:g+"__outline"},i.createElement(h.M,{ref:this.painEditorRef,className:g+"__editor "+g+"__editor-pain",placeholder:"详细说说你遇到的具体问题，具体场景",onPasteTransform:function(t,n){var r=(0,p.jQ)(t);r=(0,p.FL)(r),(0,h.U)(r),e.uploadImagePipe(n)},onChange:function(){return e.forceUpdate()}}))),i.createElement("div",{className:g+"__item"},i.createElement("div",{className:g+"__title"},"你的解决方案"),i.createElement("div",{className:g+"__outline"},i.createElement(h.M,{ref:this.solutionEditorRef,className:g+"__editor "+g+"__editor-solution",placeholder:"介绍一下你的方案，帮助我们做得更好",onPasteTransform:function(t,n){var r=(0,p.jQ)(t);r=(0,p.FL)(r),(0,h.U)(r),e.uploadImagePipe(n)},onChange:function(){return e.forceUpdate()}}))),i.createElement(d.e,{images:this.getPreviewImages(),onDel:function(t){return e.onDelImage(t)}}),i.createElement("div",{className:g+"__control"},i.createElement("form",{className:g+"__icons"},i.createElement("label",{htmlFor:this.inputFileId},i.createElement(f.Tm,{className:g+"__icon-item"})),i.createElement("input",{className:g+"__select-img-input",type:"file",multiple:!0,onChange:function(t){return e.onSelectImage(t)},id:this.inputFileId})),i.createElement("button",{className:g+"__submit",onClick:this.onSubmit,disabled:t},"发布")))},t}(i.Component);v.propTypes={onError:c().func,onClose:c().func,onUploadImage:c().func,limitImage:c().number},v.defaultProps={limitImage:6},t.Z=v},3418:function(e,t,n){n.d(t,{vX:function(){return r},wD:function(){return o},Yw:function(){return a},J0:function(){return i}});var r={POST:"replied_post_by_admin",REPLY:"replied_reply_by_admin"},o={POST:"post",REPLY:"reply"},a={wx_subscribe:"wx_subscribe",wx_subscribe_one_time:"wx_subscribe_one_time",wx_subscribe_one_time_txc:"wx_subscribe_one_time_txc",wx_mini_subscribe:"wx_mini_subscribe",qq_redirect:"qq_redirect",qq_mini_subscribe:"qq_mini_subscribe",email:"email",wx_template:"wx_template",webhook:"webhook"},i={unverified:"unverified",pending_verified:"pending_verified",verified:"verified"}},50283:function(e,t,n){n.d(t,{o:function(){return a}});var r=n(67294),o=n(80934),a=function(e){return r.createElement(r.Fragment,null,e.is_top&&r.createElement("span",{className:"post-label__span"},"置顶"),e.is_hidden&&r.createElement("span",{className:"post-label__span"},"隐藏"),e.is_spam&&r.createElement("span",{className:"post-label__span"},"黑名单"),e.is_notice&&r.createElement("span",{className:"post-label__span"},"公告"),e.is_good&&r.createElement("span",{className:"post-label__span label_good"},r.createElement("img",{src:o.Z,alt:"好问题"})))};a.defaultProps={is_top:!1,is_hidden:!1,is_spam:!1,is_notice:!1,is_good:!1}},47550:function(e,t,n){n.d(t,{s:function(){return r},m:function(){return o}});var r={BUG:"BUG",FEATURE:"FEATURE",IWANT:"IWANT"},o=[{key:r.BUG,text:"Bug",cText:"缺陷"},{key:r.FEATURE,text:"Feature",cText:"功能建议"},{key:r.IWANT,text:"I want it",cText:"我想要"}]},54052:function(e,t,n){n.d(t,{t:function(){return d}});var r=n(97326),o=n(51721),a=n(4942),i=n(67294),s=n(70272),c=n(9131),u=n(13501),l=n(45697),p=n.n(l),m=n(3418),d=function(e){function t(t){var n;return n=e.call(this,t)||this,(0,a.Z)((0,r.Z)(n),"handleEmailChange",(function(e){n.setState({successEmail:e.target.value})})),(0,a.Z)((0,r.Z)(n),"handleEmailCodeChange",(function(e){n.setState({successEmailCode:e.target.value})})),(0,a.Z)((0,r.Z)(n),"count",(function(){var e=n.state.yztime,t=setInterval((function(){n.setState({yztime:e-=1},(function(){e<=-1&&(clearInterval(t),n.setState({loading:!1,yztime:59}))}))}),1e3)})),(0,a.Z)((0,r.Z)(n),"onVerificationEmailCode",(function(){/^[a-zA-Z0-9_.]+@+[a-zA-Z0-9]+.+[A-z]/.test(n.state.successEmail)?(n.setState({loading:!0}),0==!n.state.yztime&&n.count(),(0,c.postApiNotificationUserVerifySend)({productId:parseInt(n.getProductIdFun(),10),channel:m.Yw.email,channel_uid:n.state.successEmail,type:"code"}).then((function(e){console.log(e)})).catch((function(e){"你的操作频率过快啦，稍微缓口气吧"===e.message&&s.message.error(e.message)}))):s.message.error("请输入正确的邮箱地址")})),(0,a.Z)((0,r.Z)(n),"onVerificationCode",(function(){n.state.successEmailCode||""!==n.state.successEmailCode?(0,c.postApiNotificationUserVerifyCode)({productId:parseInt(n.getProductIdFun(),10),code:n.state.successEmailCode,channel:m.Yw.email,channel_uid:n.state.successEmail}).then((function(e){n.setState({cIndex:!0}),console.log(e)})).catch((function(e){"无效的验证码"===e.message&&s.message.error(e.message)})):s.message.error("请输入验证码")})),(0,a.Z)((0,r.Z)(n),"isSubscribed",(function(){(0,c.getApiNotificationSubscribeInfo)(parseInt(n.getProductIdFun(),10),{channel:m.Yw.email,scene:n.props.scene===m.wD.REPLY?m.vX.REPLY:m.vX.POST}).then((function(e){var t=e.data.email_info.email_info;t.status===m.J0.verified&&n.setState({cIndex:!0,successEmail:t.email})}))})),(0,a.Z)((0,r.Z)(n),"onVerificationModify",(function(){n.setState({cIndex:!1})})),(0,a.Z)((0,r.Z)(n),"confirmEmail",(function(e){n.props.handlEmailConfirm(e)})),n.state={successEmail:"",successEmailCode:"",cIndex:!1,loading:!1,yztime:59},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.isSubscribed()},n.getProductIdFun=function(){return(0,u.Wv)()},n.render=function(){var e=this.state;return i.createElement("div",{className:"post-popup-success"},i.createElement("p",{className:"popup-success__thank"},"发布成功，请填写邮箱信息"),i.createElement("p",{className:"popup-success__reply"},"通过邮箱接收管理员回复推送"),e.cIndex?i.createElement(i.Fragment,null,i.createElement("p",null,i.createElement("input",{className:"popup-success__input popup-success__input--weight",type:"text",value:e.successEmail,disabled:!0}),i.createElement("span",{onKeyDown:this.onVerificationModify,className:"popup-success__span",onClick:this.onVerificationModify,role:"button",tabIndex:"0"},"修改")),i.createElement("p",{className:"popup-success__email"},i.createElement("button",{className:"popup-success__button popup-success__button--primary",onClick:this.confirmEmail},"确认订阅"))):i.createElement(i.Fragment,null,i.createElement("p",null,i.createElement("input",{className:"popup-success__input",placeholder:"填写你的电子邮箱地址",type:"text",onChange:this.handleEmailChange,value:e.successEmail}),i.createElement("button",{className:"popup-success__button popup-success__button--default",onClick:this.onVerificationEmailCode},e.loading?e.yztime+"秒":"发送验证码")),i.createElement("p",{className:"popup-success__email"},i.createElement("input",{className:"popup-success__input",placeholder:"验证码",type:"text",onChange:this.handleEmailCodeChange,value:e.successEmailCode}),i.createElement("button",{className:"popup-success__button popup-success__button--primary",onClick:this.onVerificationCode},"完成验证"))))},t}(i.Component);d.propTypes={scene:p().string,onClose:p().func,handlEmailConfirm:p().func}},80441:function(e,t,n){n.d(t,{d:function(){return h}});var r=n(87462),o=n(51721),a=n(67294),i=n(45697),s=n.n(i),c=n(94184),u=n.n(c),l=n(39104),p=n(5732),m=n(3418),d=n(9504),f=n(54052),h=function(e){function t(){return e.apply(this,arguments)||this}return(0,o.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.batchReply,n=e.avatar,o=e.methodPc;return a.createElement(l.u,{onClose:this.props.onClose},a.createElement("div",{className:u()("post_pop_ups",{batchReply:t})},a.createElement("div",{className:"banner"},a.createElement(p.Avatar,{src:n})),a.createElement("div",{className:"post-popup-wx-sub post_form"},o===m.Yw.wx_subscribe&&a.createElement(d.Z,this.props),o===m.Yw.email&&a.createElement(f.t,(0,r.Z)({},this.props.userData,{onClose:this.props.onClose,scene:this.props.scene,handlEmailConfirm:this.props.handlEmailConfirm})))))},t}(a.Component);h.propTypes={scene:s().string,methodPc:s().string,batchReply:s().string,avatar:s().string,url:s().string,status:s().string,userData:s().object,onClose:s().func,handlEmailConfirm:s().func},h.defaultProps={onClose:function(){return console.log("onClose 没有")},batchReply:!1}},21066:function(e,t,n){n(67294),n(39104),n(79361)},9504:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(67294),o=n(79361),a=n.n(o),i=n(29371),s=n(45697),c=n.n(s),u=function(e){var t=e.url,n=e.status;return"subscribed"===n?r.createElement("div",{className:"pic"},r.createElement("span",null,"授权成功")):r.createElement("div",{className:"pic qr_code"},r.createElement("div",{className:"badge"},r.createElement("img",{src:"data:image/png;base64,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",alt:"WxImg"})),r.createElement(a(),{size:124,level:"L",value:t}),"error"===n&&r.createElement("div",{className:"error",onKeyDown:e.onRetry,onClick:e.onRetry,role:"button",tabIndex:"0"},r.createElement(i.Yo,null),r.createElement("p",null,"二维码失效"),r.createElement("p",null,"请点击重试")))},l=function(e){var t=Boolean(e.url);return r.createElement("div",{className:"post-popup-success"},r.createElement("p",{className:"popup-success__thank"},"发布成功，请扫码接收回复通知"),t&&r.createElement("p",{className:"popup-success__reply"},"扫码授权第一时间收到管理员回复通知"),t&&r.createElement(u,e))};l.defaultProps={url:""},u.propTypes={url:c().string,status:c().string,onRetry:c().func},l.propTypes={url:c().string};var p=r.memo(l)},91552:function(e,t,n){function r(e){window._horizon&&window._horizon.set_user_id?window._horizon.set_user_id(e):o(r.bind(this,e))}function o(e){window._horizon=window._horizon||[],function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.id="horizon-tracker",t.setAttribute("data-account","txc.production"),e&&(t.onload=e),t.src="https://horizon-assets.qq.com/analytics.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}()}n.r(t),n.d(t,{setUserId:function(){return r},init:function(){return o}})},5416:function(e,t,n){n.d(t,{a:function(){return c}});var r=n(51721),o=n(67294),a=n(45697),i=n.n(a),s=n(82063),c=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={inpIndex:0},n}(0,r.Z)(t,e);var n=t.prototype;return n.onSubmit=function(e){var t=this.props,n=this.state;e.preventDefault();var r=e.target.querySelectorAll("input")[n.inpIndex].value;t.onReport(r)},n.render=function(){var e=this;return this.state,this.props,o.createElement("div",{className:"modal-report"},o.createElement("div",{className:"report-container"},o.createElement("form",{onSubmit:function(t){return e.onSubmit(t)}},o.createElement("div",{className:"report-title"},"举报原因"),o.createElement("div",{className:"options"},s.h.map((function(t,n){return o.createElement("div",{key:t.key,className:"item",onClick:function(){return e.setState({inpIndex:n})}},o.createElement("input",{type:"radio",name:"report",id:"modal-report-"+t.key,value:t.key}),o.createElement("label",{htmlFor:"modal-report-"+t.key},o.createElement("i",null),o.createElement("span",null,t.value)))}))),o.createElement("div",{className:"btns-wrap action-bar"},o.createElement("button",{className:"btn btn-main",type:"submit"},"举报")))))},t}(o.Component);c.propTypes={onReport:i().func},c.defaultProps={onReport:function(){console.log("onReport 未绑定")}}},91834:function(e,t,n){n.d(t,{f:function(){return w}});var r=n(67294),o=n(94184),a=n.n(o),i=n(39104),s=n(9131),c=n(42102),u=n(48288),l=n(9033),p=n(18118),m=n(45697),d=n.n(m),f=new RegExp("("+location.origin+"[a-zA-Z0-9/]+)","g");function h(e){return e.replace(/\n/g,"<br>").replace(f,'<a href="$1" target="_blank">$1</a>')}var E=function(e){var t,n=e.projectOptions,o=e.projectTypes,a=e.cancel,i=e.submit,s=e.productId,m=e.post,d=(0,r.useState)(""),f=d[0],E=d[1],g=(0,r.useState)(""),v=g[0],_=g[1],b=(0,r.useState)(!1),y=b[0],C=b[1],I=(0,r.useState)(null==(t=m.content)?void 0:t.slice(0,100)),N=I[0],k=I[1],w=(0,r.useState)(function(e,t){return"用户反馈："+e.content+"\n图片数量："+e.images.length+"张\n反馈链接："+window.location.origin+"/products/"+t+"/post/"+e.id}(m,s)),S=w[0],x=w[1],A=(0,r.useState)(!1),P=A[0],R=A[1],T=y&&!N?"标题不能为空":"";return(0,r.useEffect)((function(){n.length&&E(n[0].key)}),[n]),(0,r.useEffect)((function(){o.length&&_(o[0].key)}),[o]),r.createElement(r.Fragment,null,r.createElement(c.Z,{layout:"inline",labelWidth:76,className:"tapd-confirm-body__form"},r.createElement(c.Z.Item,{label:"TAPD 项目",className:"tapd-confirm-body__form-inline"},r.createElement(u.Z,{loading:!n.length,options:n,value:f,optionKey:function(e){return e.key},optionText:function(e){return e.text},onChange:function(e){return E(e)}})),r.createElement(c.Z.Item,{label:"事项类别",className:"tapd-confirm-body__form-inline"},r.createElement(u.Z,{options:o,value:v,optionKey:function(e){return e.key},optionText:function(e){return e.text},onChange:function(e){return _(e)}}))),r.createElement(c.Z,{labelWidth:76,className:"tapd-confirm-body__form"},r.createElement(c.Z.Item,{label:"事项标题",required:!0,error:T},r.createElement(l.Z,{placeholder:"请输入任务的标题",value:N,onBlur:function(){return C(!0)},onChange:function(e){return k(e.target.value)}})),r.createElement(c.Z.Item,{label:"事项内容"},r.createElement(l.Z.Textarea,{className:"tapd-confirm-body__form-textarea",placeholder:"请输入任务的标题",value:S,onChange:function(e){return x(e.target.value)}}))),r.createElement("div",{className:"tapd-confirm-body__form-footer"},r.createElement(p.zx,{onClick:a,theme:"minor",size:"small"},"取消"),r.createElement(p.zx,{size:"small",theme:"primary",loading:P,onClick:function(){if(N&&!P){var e={type:v,project:f,content:h(S),title:N},t=i(e);t&&t.then&&(R(!0),t.then((function(){return R(!1)})))}else C(!0)}},"保存")))};E.propTypes={projectOptions:d().array,projectTypes:d().array,cancel:d().func,submit:d().func,post:d().object};var g=n(29371),v=function(e){var t=e.text.split(e.search),n=t[0],o=t[1];return r.createElement("div",null,r.createElement("span",{className:"tapd-confirm-search__result-id"},"#",e.key.substr(-9)),r.createElement("span",null,n),r.createElement("span",{className:"tapd-confirm-search__result-target"},e.search),r.createElement("span",null,o),r.createElement("span",null,"【",e.status,"】"))},_=function(e){var t=e.projectOptions,n=e.projectTypes,o=e.cancel,a=e.submit,i=e.productId,l=e.postId,m=(0,r.useState)(""),d=m[0],f=m[1],h=(0,r.useState)(""),E=h[0],_=h[1],b=(0,r.useState)(!1),y=b[0],C=b[1],I=(0,r.useState)(null),N=I[0],k=I[1],w=(0,r.useState)(!1),S=w[0],x=w[1],A=function(e){var t=(0,r.useState)(!1),n=t[0],o=t[1],a=(0,r.useState)([]),i=a[0],c=a[1],u=(0,r.useRef)(null);return{searchLoading:n,searchResults:i,startSearch:function(t,n,r,a){if(clearTimeout(u.current),o(!0),""===t)return o(!1),void c([]);u.current=setTimeout((function(){(0,s.post_api_authorize_callback)({productId:e,event:"app_item_list_show_for_search",txc_app_id:r,txc_post_id:n,item_type:a,keyword:t}).then((function(e){e.data&&e.data.items&&(c(e.data.items.map((function(e){return{text:e.title,key:e.id,status:e.status,search:t,url:e.url}}))),o(!1))}))}),500)}}}(i),P=A.searchLoading,R=A.searchResults,T=A.startSearch,Z=y&&!N?"请先选择需求":"";return(0,r.useEffect)((function(){t.length&&f(t[0].key)}),[t]),(0,r.useEffect)((function(){n.length&&_(n[0].key)}),[n]),r.createElement(r.Fragment,null,r.createElement(c.Z,{layout:"inline",labelWidth:76,className:"tapd-confirm-body__form"},r.createElement(c.Z.Item,{label:"TAPD 项目",className:"tapd-confirm-body__form-inline"},r.createElement(u.Z,{loading:!t.length,options:t,value:d,optionKey:function(e){return e.key},optionText:function(e){return e.text},onChange:function(e){return f(e)}})),r.createElement(c.Z.Item,{label:"事项类别",className:"tapd-confirm-body__form-inline"},r.createElement(u.Z,{options:n,value:E,optionKey:function(e){return e.key},optionText:function(e){return e.text},onChange:function(e){return _(e)}}))),r.createElement(c.Z,{labelWidth:76,className:"tapd-confirm-body__form"},r.createElement(c.Z.Item,{label:"选择事项",required:!0,error:Z},r.createElement(u.Z,{loading:P,placeholder:"搜索的任务名称",options:R,optionKey:"key",optionText:"text",onBlur:function(){return C(!0)},onChange:function(e,t){return k(t)},onFilter:function(e){return T(e,l,d,E)},renderOption:v,suffixIcon:r.createElement(g.sn,null)}))),r.createElement("div",{className:"tapd-confirm-body__form-footer",style:{marginTop:218}},r.createElement(p.zx,{onClick:o,theme:"minor",size:"small"},"取消"),r.createElement(p.zx,{size:"small",theme:"primary",loading:S,onClick:function(){if(N&&!S){var e=a({type:E,project:d,select:N});e&&e.then&&(x(!0),e.then((function(){return x(!1)})))}else C(!0)}},"保存")))},b=n(14310),y=n(9487),C=n(68247),I="create",N="relation",k=[{type:I,title:"创建事项"},{type:N,title:"关联事项"}],w=function(e){var t=(0,r.useState)(I),n=t[0],o=t[1],c=(0,r.useState)([]),u=c[0],l=c[1],p=(0,r.useState)([]),m=p[0],d=p[1];function f(e,t,n){void 0===n&&(n="success");var r=m.find((function(t){return t.key===e}));r&&y.Z[n](""+r.text+t)}return(0,r.useEffect)((function(){var t;(t=e.productId,(0,s.apiGetAuthorizedApp)(t).then((function(e){var t=[];return e.data&&e.data.apps&&(t=e.data.apps.filter((function(e){return e.platform_id===C.Lb.TAPD&&e.status===C.y2.ON})).map((function(e){return{key:e.txc_app_id,text:e.app_name}}))),t}))).then((function(e){e.length&&l(e)})),function(e){return(0,s.getApiPlatfromInfo)({productId:e,platformId:C.Lb.TAPD}).then((function(e){return e.data&&e.data.item_types?Object.keys(e.data.item_types).map((function(t){return{key:t,text:e.data.item_types[t]}})):[]})).catch((function(){return[]}))}(e.productId).then((function(e){e.length&&d(e)}))}),[]),e.open?r.createElement(i.u,{onClose:e.onClose},r.createElement("div",{className:"title tapd-confirm-title"},r.createElement("i",{className:"tapd-confirm-icon"}),"关联 TAPD 项目"),r.createElement("div",{className:"tapd-confirm-body"},r.createElement("div",{className:"tapd-confirm-body__tabs"},k.map((function(e){return r.createElement("button",{key:e.type,className:a()("tapd-confirm-body__tab",{"is-active":n===e.type}),onClick:function(){return o(e.type)}},e.title)}))),r.createElement("div",{className:"tapd-confirm-body__content"},n===I&&r.createElement(E,{post:e.post,projectOptions:u,projectTypes:m,cancel:e.onClose,submit:function(t){return(0,s.post_api_authorize_callback)({productId:e.productId,event:"app_item_create",txc_app_id:t.project,txc_post_id:e.post.id,item_type:t.type,item_title:t.title,item_desc:t.content,creator:e.user.nickname}).then((function(n){f(t.type,"创建成功","success"),new b.BY({ea:"创建工单",ev:n.data.id}).report(),e.onSuccess(n.data.url)})).catch((function(){f(t.type,"创建失败","error"),e.onError()}))},productId:e.productId}),n===N&&r.createElement(_,{post:e.post,postId:e.post.id,productId:e.productId,projectOptions:u,projectTypes:m,cancel:e.onClose,submit:function(t){return(0,s.post_api_authorize_callback)({productId:e.productId,event:"app_item_bind",txc_app_id:t.project,txc_post_id:e.post.id,item_type:t.type,item_id:t.select.key}).then((function(){f(t.type,"关联成功","success"),new b.BY({ea:"关联工单",ev:t.select.key}).report(),e.onSuccess(t.select.url)})).catch((function(){f(t.type,"关联失败","error"),e.onError()}))}})))):null};w.defaultProps={onSuccess:function(){},onError:function(){}}},73862:function(e,t,n){n.d(t,{p:function(){return o}});var r=n(68247);function o(e){void 0===e&&(e=[]);for(var t=0;t<e.length;t++)if(e[t].id===r.Lb.TAPD&&e[t].status===r.y2.ON)return!0;return!1}},18873:function(e,t,n){n.d(t,{XF:function(){return a},KZ:function(){return i},FA:function(){return s},kb:function(){return c}});var r=n(9131),o=["1.20","1.68","1.88","2.88","3.65","5.20","6.66","8.88","9.99"],a=function(){var e=Math.ceil(0),t=Math.floor(o.length),n=Math.floor(Math.random()*(t-e))+e;return o[n]},i=function(e){return(0,r.post_api_tip)(e).then((function(e){return 0!==e.status?Promise.reject(new Error(e.message)):e.data}))},s=function(e){return"PC"!==e.endpoint?Promise.reject(new Error("endpoint 不正确: "+e.endpoint)):e.code_url?e:Promise.reject(new Error("获取 code_url 失败"))},c=function(e){if("PUBLIC"!==e.endpoint)return Promise.resolve(e);if(!((t=window.navigator.userAgent.match(/micromessenger\/(\d+)/i))&&t[1]&&Boolean(t[1]>=5)))return Promise.reject(new Error("当前微信版本太低，不支持打赏"));var t,n={appId:String(e.appId),timeStamp:String(e.timeStamp),nonceStr:e.nonceStr,signType:e.signType,paySign:e.paySign,package:e.package};return new Promise((function(t,r){var o=function(){WeixinJSBridge.invoke("getBrandWCPayRequest",n,(function(n){switch(n.err_msg){case"get_brand_wcpay_request:ok":t(e);break;case"get_brand_wcpay_request:cancel":r(new Error("取消支付"));break;case"get_brand_wcpay_request:fail":r(new Error("支付失败"));break;default:r(new Error("未知错误："+n.err_msg))}}))};"undefined"==typeof WeixinJSBridge?document.addEventListener("WeixinJSBridgeReady",o,!1):o()}))}},17053:function(e,t,n){n.d(t,{H:function(){return d}});var r=n(97326),o=n(51721),a=n(67294),i=n(45697),s=n.n(i),c=n(39104),u=n(9131),l=n(18873),p=n(4966),m=n(96835),d=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={code_url:""},n.processShowQRCode=n.processShowQRCode.bind((0,r.Z)(n)),n.processCheckPayStatus=n.processCheckPayStatus.bind((0,r.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.onConfirm=function(e){var t=this,n=this.props,r=(this.state,{productId:n.productId,postId:n.postId,amount:(100*e).toFixed(0),endpoint:"PC"});Promise.resolve(r).then(l.KZ).then(l.FA).then(this.processShowQRCode).then((function(e){return t.processCheckPayStatus(e)})).catch((function(e){return n.onError(e)}))},n.processShowQRCode=function(e){return e.code_url?(this.setState({code_url:e.code_url}),e):Promise.reject(new Error("code_url 获取失败"))},n.processCheckPayStatus=function(e){var t=this,n=this.props,r={productId:n.productId,tipId:e.id};(0,u.post_api_tip_callback)(r).then((function(r){t.willUnmount||(1===r.data.status?t.timer=setTimeout((function(){t.processCheckPayStatus(e)}),500):n.onSuccess())}))},n.onCloseReward=function(){var e=this.props;clearTimeout(this.timer),e.onClose()},n.render=function(){var e=this,t=this.props,n=this.state;return a.createElement(c.u,{onClose:function(){return e.onCloseReward()}},a.createElement("div",{className:"desktop-tipped-modal"},n.code_url?a.createElement(m.j,{url:n.code_url}):a.createElement(p.G,{avatar:t.avatar,nickName:t.nickName,onConfirmClick:this.onConfirm.bind(this)})))},t}(a.Component);d.propTypes={productId:s().string,postId:s().string,avatar:s().string,nickName:s().string,onSuccess:s().func,onError:s().func,onEndPay:s().func,onClose:s().func},d.defaultProps={onClose:function(){return console.log("DesktopTippedModal 没有onClose")}}},79800:function(e,t,n){n.d(t,{H:function(){return r.H}}),n(22345);var r=n(17053)},89109:function(e,t,n){var r=n(51721),o=n(67294),a=function(e){function t(t){var n;(n=e.call(this,t)||this).state={from:NaN},n.list=[],n.spew=[];for(var r=0;r<10;r++)n.spew.push(o.createElement("span",{key:""+r,ref:function(e){return n.list.push(e)}},r));return n}(0,r.Z)(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e){return!(e.to===this.props.to)},n.componentDidMount=function(){var e=this;setTimeout((function(){e.forceUpdate()}),0)},n.render=function(){var e=this.props.to,t=this.list&&this.list[e]&&this.list[e].offsetTop||0;return o.createElement("div",{className:"motion-number"},o.createElement("span",{style:{transform:"translateY(-"+t+"px)"}},this.spew))},t}(o.Component);t.Z=a},4966:function(e,t,n){n.d(t,{G:function(){return u}});var r=n(67294),o=n(45697),a=n.n(o),i=n(29371),s=(n(5732),n(18873)),c=n(89109),u=function(e){var t=(0,r.useState)(s.XF),n=t[0],o=t[1];return r.createElement("div",{className:"tip-modal-content"},r.createElement("div",{className:"content-inside"},r.createElement("a",{className:"close-tag",onClick:e.onClose}),r.createElement("header",null,r.createElement(i.Fq,null)),r.createElement("img",{className:"avatar",src:e.avatar}),r.createElement("div",{className:"nickname"},e.nickName),r.createElement("div",{className:"amount"},r.createElement(c.Z,{to:n[0]}),r.createElement("span",null,"."),r.createElement(c.Z,{to:n[2]}),r.createElement(c.Z,{to:n[3]})),r.createElement("a",{className:"change-amount",onClick:function(e){return o((0,s.XF)())}},r.createElement(i.z9,null),r.createElement("span",null,"换个金额")),r.createElement("i",{className:"gap"}),r.createElement("footer",null,r.createElement("a",{className:"wrap","data-disable":e.disable,onClick:e.onConfirmClick.bind(void 0,n)},"确认金额"))))};u.propTypes={nickName:a().string,avatar:a().string,disable:a().bool,onConfirmClick:a().func}},22345:function(e,t,n){var r=n(97326),o=n(51721),a=n(67294),i=n(73935),s=n(45697),c=n.n(s),u=n(94184),l=n.n(u),p=n(9131),m=n(83078),d=n(4966),f=n(18873),h=function(e){function t(t){var n;return(n=e.call(this,t)||this).processCheckPayStatus=n.processCheckPayStatus.bind((0,r.Z)(n)),n}(0,o.Z)(t,e);var n=t.prototype;return n.onConfirm=function(e){var t=this.props,n=(this.state,{productId:t.productId,postId:t.postId,amount:(100*e).toFixed(0)});Promise.resolve(n).then(f.KZ).then(f.kb).then(this.processCheckPayStatus).catch((function(e){return t.onError(e)}))},n.processCheckPayStatus=function(e){this.state;var t=this.props,n={productId:t.productId,tipId:e.id};return new Promise((function(e,r){(0,p.post_api_tip_callback)(n).then((function(e){if(0!==e.status)return r(new Error(e.message));t.onSuccess()}))}))},n.render=function(){var e=this,t=this.props;return this.state,(0,i.createPortal)(a.createElement("div",{className:l()("tipped-modal",{active:t.isActive})},t.isActive&&a.createElement(m.z,{onClick:t.onCancel}),t.isActive&&a.createElement(d.G,{onConfirmClick:function(t){return e.onConfirm(t)},avatar:t.avatar_url,nickName:t.nick_name,onClose:t.onCancel})),document.body)},t}(a.Component);h.propTypes={isActive:c().bool,nick_name:c().string,avatar_url:c().string,productId:c().string,postId:c().string,onCancel:c().func,onSuccess:c().func,onError:c().func},h.defaultProps={onError:function(){return console.log("onError 未绑定")},onSuccess:function(){return console.log("onSuccess 未绑定")},onCancel:function(){return console.log("onCancel 未绑定")}}},96835:function(e,t,n){n.d(t,{j:function(){return u}});var r=n(67294),o=n(45697),a=n.n(o),i=n(79361),s=n.n(i),c=n(29371),u=function(e){return r.createElement("div",{className:"com-tip-scan-modal content"},r.createElement("div",{className:"content-inside"},r.createElement("a",{className:"close-tag",onClick:e.onClose}),r.createElement("header",null,r.createElement(c.Fq,null)),r.createElement("span",{className:"wechatpay"},r.createElement(c.R7,null),"微信支付"),r.createElement("div",{className:"qrcode"},r.createElement(s(),{size:111,level:"H",value:e.url})),r.createElement("footer",null,"使用微信扫描二维码完成支付")))};u.propTypes={url:a().string,onClose:a().func}},19973:function(e,t,n){n.d(t,{H:function(){return p}});var r=n(67294),o=n(45697),a=n.n(o),i=n(94184),s=n.n(i),c=n(29371),u=n(25574),l=(0,r.forwardRef)((function(e,t){return r.createElement("span",{className:s()("btn-spark","btn-emoji",e.className),onClick:e.onClick,onKeyPress:e.onClick,role:"button",tabIndex:"0",ref:t},r.createElement(c.HN,null))}));l.propTypes={className:a().string,onClick:a().func},l.displayName="BtnEmoji";var p=(0,u.n)(l)},88022:function(e,t,n){n.d(t,{n:function(){return l}});var r=n(67294),o=n(45697),a=n.n(o),i=n(63075),s=n(94184),c=n.n(s),u=n(29371),l=function(e){return r.createElement(i.Z.span,{className:"btn-public",onClick:e.onChange},r.createElement(i.Z.span,{className:c()("icon",{checked:e.checked})},e.checked&&r.createElement(u.wk,{className:"tcIcon_tick"})),"回复并取消隐藏")};l.propTypes={checked:a().bool,onChange:a().func}},33376:function(e,t,n){n.d(t,{Z1:function(){return r.Z},nU:function(){return o.n},tt:function(){return a.t}});var r=n(26702),o=(n(66620),n(88022)),a=(n(9259),n(67369))},5732:function(e,t,n){n.d(t,{UserLoginModal:function(){return r.V},getQQConnectURL:function(){return o.e},getIoaUrl:function(){return o.x},Avatar:function(){return a.q}});var r=n(22215),o=n(34670),a=n(27489)},22215:function(e,t,n){n.d(t,{V:function(){return c}});var r=n(51721),o=n(67294),a=n(45697),i=n.n(a),s=n(11998),c=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this.props;return this.state,o.createElement("div",{className:"user-login-modal"},o.createElement(s.s,{onSuccess:e.onSuccess,onError:e.onError}))},t}(o.Component);c.propTypes={onError:i().func,onSuccess:i().func},c.defaultProps={onError:function(){console.log("onError 未绑定")},onSuccess:function(){console.log("onSuccess 未绑定")}}},96032:function(e,t,n){function r(e){var t={};return Object.keys(e).forEach((function(n){t[n]=e[n],t[e[n]]=n})),Object.freeze(t)}n.d(t,{V:function(){return r}})},83887:function(e,t,n){n(13501),n(14310),n(64724)}}]);
//# sourceMappingURL=index.9aad3417.js.map